<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Notification Center</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .whatsapp-icon {
            background: #25D366;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        h1 {
            font-size: 28px;
            color: #333;
        }

        .stats {
            display: flex;
            gap: 40px;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #25D366;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 13px;
            font-weight: 600;
            color: #555;
        }

        select, input[type="text"] {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            min-width: 180px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-apply {
            background: #25D366;
            color: white;
        }

        .btn-apply:hover {
            background: #20b858;
        }

        .btn-reset {
            background: #f0f0f0;
            color: #333;
        }

        .btn-reset:hover {
            background: #e0e0e0;
        }

        .data-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f8f8f8;
            padding: 15px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            border-bottom: 2px solid #eee;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        tr:hover {
            background: #fafafa;
        }

        .student-name {
            font-weight: 600;
            color: #333;
            display: block;
        }

        .student-id {
            font-size: 12px;
            color: #999;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-doc {
            background: #fff3cd;
            color: #856404;
        }

        .badge-cas {
            background: #cce5ff;
            color: #004085;
        }

        .badge-visa {
            background: #f8d7da;
            color: #721c24;
        }

        .status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-sent {
            background: #d4edda;
            color: #155724;
        }

        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-pending .status-dot {
            background: #856404;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .status-sent .status-dot {
            background: #155724;
        }

        .status-failed .status-dot {
            background: #721c24;
        }

        .btn-view {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-view:hover {
            background: #25D366;
            color: white;
        }

        .btn-stop {
            background: white;
            color: #dc3545;
            border: 1px solid #dc3545;
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-stop:hover {
            background: #dc3545;
            color: white;
        }

        .btn-resend {
            background: white;
            color: #28a745;
            border: 1px solid #28a745;
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-resend:hover {
            background: #28a745;
            color: white;
        }

        .btn-sent {
            background: #e0e0e0;
            color: #999;
            padding: 6px 12px;
            font-size: 12px;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        .close-btn:hover {
            color: #333;
        }

        .template-box {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .template-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 13px;
            color: #666;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            display: none;
            z-index: 2000;
        }

        .toast.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <div class="title">
                    <div class="whatsapp-icon">ðŸ’¬</div>
                    <h1>WhatsApp Notification Center</h1>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="statTotal">15</div>
                        <div class="stat-label">Total Messages</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="statPending">7</div>
                        <div class="stat-label">Pending</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="statAction">8</div>
                        <div class="stat-label">Action Taken</div>
                    </div>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label>Reminder Type</label>
                    <select id="filterType">
                        <option value="">All Types</option>
                        <option value="doc">Document Pending</option>
                        <option value="cas">CAS Document</option>
                        <option value="visa">Visa Reminder</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="">All Status</option>
                        <option value="pending">Yet to Send</option>
                        <option value="sent">Sent</option>
                        <option value="failed">Failed</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Search Student</label>
                    <input type="text" id="searchBox" placeholder="Name or ID">
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <button class="btn-apply" onclick="filterData()">Apply Filters</button>
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <button class="btn-reset" onclick="resetFilters()">Reset</button>
                </div>
            </div>
        </div>

        <div class="data-table">
            <table>
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Reminder Type</th>
                        <th>Message Template</th>
                        <th>Status</th>
                        <th>Scheduled Time</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal for Templates -->
    <div id="templateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>WhatsApp Message Template</h2>
                <button class="close-btn" onclick="closeTemplateModal()">&times;</button>
            </div>
            <div id="templateBody">
                <!-- Template content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span id="toastText">Action completed!</span>
    </div>

    <script>
        // Data - Pending messages first for CSP to review
        var allStudents = [
            // Pending messages (need CSP action)
            { id: 'STU001', name: 'Aarav Sharma', type: 'doc', status: 'pending', time: 'Today, 2:30 PM' },
            { id: 'STU002', name: 'Priya Patel', type: 'cas', status: 'pending', time: 'Today, 3:00 PM' },
            { id: 'STU003', name: 'Arjun Reddy', type: 'visa', status: 'pending', time: 'Today, 3:30 PM' },
            { id: 'STU004', name: 'Ananya Gupta', type: 'doc', status: 'pending', time: 'Today, 4:00 PM' },
            { id: 'STU005', name: 'Rohan Singh', type: 'cas', status: 'pending', time: 'Today, 4:30 PM' },
            { id: 'STU006', name: 'Kavya Nair', type: 'visa', status: 'pending', time: 'Today, 5:00 PM' },
            { id: 'STU007', name: 'Aditya Kumar', type: 'doc', status: 'pending', time: 'Tomorrow, 9:00 AM' },
            // Failed messages
            { id: 'STU008', name: 'Ishaan Verma', type: 'cas', status: 'failed', time: 'Today, 10:00 AM' },
            { id: 'STU009', name: 'Diya Mehta', type: 'visa', status: 'failed', time: 'Today, 11:00 AM' },
            // Sent messages
            { id: 'STU010', name: 'Vikram Joshi', type: 'doc', status: 'sent', time: 'Yesterday, 2:00 PM' },
            { id: 'STU011', name: 'Sara Khan', type: 'cas', status: 'sent', time: 'Yesterday, 3:00 PM' },
            { id: 'STU012', name: 'Rahul Desai', type: 'visa', status: 'sent', time: 'Yesterday, 4:00 PM' },
            { id: 'STU013', name: 'Neha Agarwal', type: 'doc', status: 'sent', time: 'Today, 9:00 AM' },
            { id: 'STU014', name: 'Karthik Iyer', type: 'cas', status: 'sent', time: 'Today, 9:30 AM' },
            { id: 'STU015', name: 'Meera Rao', type: 'visa', status: 'sent', time: 'Today, 10:30 AM' }
        ];

        var displayedStudents = [...allStudents];

        // Render table
        function renderTable() {
            var tbody = document.getElementById('tableBody');
            var html = '';

            if (displayedStudents.length === 0) {
                html = '<tr><td colspan="6" class="no-data">No students found</td></tr>';
            } else {
                displayedStudents.forEach(function(student) {
                    var typeLabel = student.type === 'doc' ? 'Document Pending' : 
                                   student.type === 'cas' ? 'CAS Document' : 'Visa Reminder';
                    var statusLabel = student.status === 'pending' ? 'Yet to Send' : 
                                     student.status === 'sent' ? 'Sent' : 'Failed';
                    
                    html += '<tr>';
                    html += '<td><span class="student-name">' + student.name + '</span><span class="student-id">' + student.id + '</span></td>';
                    html += '<td><span class="badge badge-' + student.type + '">' + typeLabel + '</span></td>';
                    html += '<td><button class="btn-view" onclick="showTemplate(\'' + student.name + '\')">View Template</button></td>';
                    html += '<td><span class="status status-' + student.status + '"><span class="status-dot"></span>' + statusLabel + '</span></td>';
                    html += '<td>' + student.time + '</td>';
                    html += '<td>';
                    
                    if (student.status === 'pending') {
                        html += '<button class="btn-stop" onclick="stopMsg(\'' + student.id + '\')">Stop Send</button>';
                    } else if (student.status === 'failed') {
                        html += '<button class="btn-resend" onclick="resendMsg(\'' + student.id + '\')">Resend</button>';
                    } else {
                        html += '<button class="btn-sent" disabled>Sent</button>';
                    }
                    
                    html += '</td>';
                    html += '</tr>';
                });
            }

            tbody.innerHTML = html;
        }

        // Filter data
        function filterData() {
            var type = document.getElementById('filterType').value;
            var status = document.getElementById('filterStatus').value;
            var search = document.getElementById('searchBox').value.toLowerCase();

            displayedStudents = allStudents.filter(function(student) {
                var matchType = !type || student.type === type;
                var matchStatus = !status || student.status === status;
                var matchSearch = !search || 
                    student.name.toLowerCase().includes(search) || 
                    student.id.toLowerCase().includes(search);
                
                return matchType && matchStatus && matchSearch;
            });

            renderTable();
            showToast('Filters applied');
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('filterType').value = '';
            document.getElementById('filterStatus').value = '';
            document.getElementById('searchBox').value = '';
            displayedStudents = [...allStudents];
            renderTable();
            showToast('Filters reset');
        }

        // Stop message
        function stopMsg(id) {
            if (confirm('Stop this message from being sent?')) {
                var student = allStudents.find(function(s) { return s.id === id; });
                if (student) {
                    student.status = 'failed';
                    filterData();
                    updateStats();
                    showToast('Message stopped');
                }
            }
        }

        // Resend message
        function resendMsg(id) {
            if (confirm('Resend this message?')) {
                var student = allStudents.find(function(s) { return s.id === id; });
                if (student) {
                    student.status = 'pending';
                    student.time = 'In 30 minutes';
                    filterData();
                    updateStats();
                    showToast('Message queued');
                }
            }
        }

        // Show template modal
        function showTemplate(name) {
            var modal = document.getElementById('templateModal');
            var body = document.getElementById('templateBody');
            
            body.innerHTML = '<div class="template-meta"><span><strong>Channel:</strong> WhatsApp</span><span><strong>Language:</strong> English</span></div>';
            body.innerHTML += '<div class="template-box"><h3>ðŸ“‹ Message Preview</h3>';
            body.innerHTML += '<p>Hello ' + name + '! ðŸ‘‹</p>';
            body.innerHTML += '<p>This is a reminder about your pending documents. Please submit them before the deadline.</p>';
            body.innerHTML += '<p>Reply HELP for assistance.</p>';
            body.innerHTML += '<p>- Student Services</p></div>';
            
            modal.classList.add('show');
        }

        // Close modal
        function closeTemplateModal() {
            document.getElementById('templateModal').classList.remove('show');
        }

        // Update statistics
        function updateStats() {
            var total = allStudents.length;
            var pending = allStudents.filter(function(s) { return s.status === 'pending'; }).length;
            var action = allStudents.filter(function(s) { return s.status !== 'pending'; }).length;
            
            document.getElementById('statTotal').textContent = total;
            document.getElementById('statPending').textContent = pending;
            document.getElementById('statAction').textContent = action;
        }

        // Show toast
        function showToast(msg) {
            var toast = document.getElementById('toast');
            document.getElementById('toastText').textContent = msg;
            toast.classList.add('show');
            setTimeout(function() {
                toast.classList.remove('show');
            }, 2000);
        }

        // Initialize
        renderTable();
        updateStats();
    </script>
</body>
</html>
